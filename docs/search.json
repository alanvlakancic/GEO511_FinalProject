[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Euclidean Bus Mobility and Route Optimization, A Comparison",
    "section": "",
    "text": "Introduction\nThis project will use stplanr transport modeling package to design an optimal transport route for bus or cycle routes in New York City. Stplanr is a transport planning visualization R package that can be used to plan transit networks, in addition to transit planning elements such as identifying transit catchment areas, origin/destination data and ride frequency visualizations, among others. In their white paper, the devlopers of stplanr call for an accountable, transparent and democratized transit planning system that doesn’t rely on proprietary and often vastly different data sources and data processing softwares. Although the package can visualize a whole host of data, this project will focus on comparing direct desire lines or “Euclidean” routes (as the crow flies), existing bus networks and stplanr’s optimized routes. To wit: this can map the efficiency of the bus routes compared to the most direct route possible if there were no built environment factors in the way.\n\n\nMethods\nTo adequately compare desire lines, bus routes, and the most efficient routes with the current street network, this project will require at minimum three data sources. Each of these will be sourced separately and overlaid onto each other:\n\nData Source: ggmap data for basemap\n\nMethods: This can be sourced directly into R by installing the package. ggmap can bring in data from Stadiamaps. This will require a Google API key to be registered.\n\nSource: Getting Started with ggmap & Stadiamaps\n\nData Source: OpenStreetMap data for transit data, either bus or cycle routes\n\nMethods: This can be sourced directly into R by installing the package. You may need to rationalize different projection systems to make sure they overlay correctly.\n\nSource: Mapping with OpenStreetMap in R\n\nData Source: NYC Open Data for Bus Shelter locations\nDespite significant searching, there is no comprehensive bus stop dataset, so the project will focus on bus stop shelters, which are mapped via NYC Open Data.\n\nMethods: This can be brought into R as a CSV file. Each bus stop shelter has longitude and latitude coordinates that align with ggmap and OpenStreetMap projections.\n\nSource: NYC Bus Stop Shelters\n\n\n\n\nWorkflow:\n\n\nShow code\ninstall.packages(\"ggmap\")\ninstall.packages(\"stplanr\")\ninstall.packages(\"osmdata\")\ninstall.packages(\"sf\")\ninstall.packages(\"dodgr\")\nlibrary(ggmap)\nlibrary(stplanr)\nlibrary(osmdata)\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(dodgr)\n\n#this workflow includes map tests to ensure the data is working\n\nqueens_bbox &lt;- c(left = -73.96, bottom = 40.54, right = -73.70, top = 40.81)\n\nggmap::register_stadiamaps(key = \"324ab7fd-26ce-4b7d-924b-38f00bc9f021\")\nnyc_map &lt;- get_stadiamap(\n  bbox = queens_bbox,\n  zoom = 10,\n  maptype = \"stamen_toner\"\n)\nggmap(nyc_map)\n#googling identifies that this is in WGS 84\n\nshelters_sf &lt;- read_csv(\"data/Bus_Stop_Shelter_20251020.csv\")\n#download and import bus shelters\n\nshelters_sf_fix &lt;- st_as_sf(shelters_sf, coords = c(\"Longitude\", \"Latitude\"), crs = 4326)\n#convert to sf (simple feature) object with the correct coordinate reference system\n\nggmap(nyc_map) +\n  geom_sf(data = shelters_sf_fix, inherit.aes = FALSE, color = \"blue\", size = .5)\n#plot shelters on the map\n\nosm_queens &lt;- opq(bbox = queens_bbox) %&gt;%\n  add_osm_feature(key = \"highway\", value = c(\"primary\", \"secondary\")) %&gt;%\n  osmdata_sf()\n#import osm data\n\nshelters_sf_fix &lt;- shelters_sf_fix %&gt;%\n  mutate(id = paste0(\"S\", row_number()))\n# add ID column for origin-destination pairs\n\nflow_all &lt;- expand.grid(\n  o = shelters_sf_fix$id,\n  d = shelters_sf_fix$id,\n  stringsAsFactors = FALSE\n) %&gt;%\n  filter(o != d) %&gt;%              # this remove self-pairs\n  mutate(trips = 1)\n# create origin-destination pairs with a trip count of 1\n\nflow_all &lt;- sample_n(flow_all, 500)\n# sample 500 random pairs to reduce computation\n\ndesire_lines_all &lt;- od2line(flow_all, zones = shelters_sf_fix, zone_code = \"id\")\n# create desire lines for all pairs\n\n\ndesire_plot &lt;- ggmap(nyc_map) +\n  geom_sf(data = osm_queens$osm_lines, inherit.aes = FALSE,\n          color = \"gray60\", size = 0.3, alpha = 0.6) +\n  geom_sf(data = desire_lines_all, inherit.aes = FALSE,\n          color = \"red\", size = 0.3, alpha = 0.5) +\n  geom_sf(data = shelters_sf_fix, inherit.aes = FALSE,\n          color = \"blue\", size = 1) +\n  ggtitle(\"Desire Lines Between All Bus Shelters in Queens\")\n# plot desire lines along with roads and shelters\n\nplot(desire_plot)\n\n\n\n\nFigure\n # Questions - Naturally, a silhouette instead of the Stadia map would be more attractive, if there’s one you can suggest. - I am struggling to figure out how to use the Open Street Map data (osm) as a ‘route’ for stplanr to analyze. It’s currently just a sf, so it’s not a vector. - The dodgr package does this, I just have not figured it out yet. - Looking to do something that looks like this: -"
  },
  {
    "objectID": "index.html#download-and-clean-all-required-data",
    "href": "index.html#download-and-clean-all-required-data",
    "title": "Analyzing Urban Mobility Patterns Using stplanr",
    "section": "Download and clean all required data",
    "text": "Download and clean all required data\n\n\nCode\nn=20\ndata=data.frame(x=runif(n,-180,180),\n                y=runif(n,-60,60),\n                size = runif(n, 5, 20),\n                category = factor(\n                  sample(letters[1:5], n, replace = TRUE)\n                  ),\n                value = rnorm(n))\n\n\n\nCode\ndata %&gt;% \n  slice(1:10) %&gt;% #show only 1:n rows\n  kable(digits=2,align=\"c\")%&gt;% #make table and round to two digits\n  kable_styling(bootstrap_options = \n                  c(\"striped\", \"hover\", \"condensed\", \"responsive\")) #apply other formatting\n\n\n\n\n\nx\ny\nsize\ncategory\nvalue\n\n\n\n\n148.18\n-28.60\n6.17\nd\n-0.37\n\n\n54.02\n23.81\n6.32\ne\n-0.41\n\n\n165.83\n-13.85\n16.35\nd\n-1.73\n\n\n174.36\n23.91\n10.55\ne\n-0.48\n\n\n116.50\n-56.81\n18.17\nd\n-0.33\n\n\n-160.48\n42.96\n5.84\na\n1.03\n\n\n35.39\n-59.37\n11.03\ne\n-1.58\n\n\n-169.40\n23.57\n12.64\nb\n-0.11\n\n\n-114.45\n58.58\n19.67\nc\n1.39\n\n\n-30.02\n-42.35\n16.95\nc\n0.09\n\n\n\n\n\n\nAdd any additional processing steps here."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n\nCode\n1 + 1\n\n\n[1] 2"
  },
  {
    "objectID": "data/Readme.html",
    "href": "data/Readme.html",
    "title": "Data Folder",
    "section": "",
    "text": "Data Folder\nPlace any data needed by your analysis in this folder. Please do not store large files here. Then read in any data using the ‘data’ path. For example, read_csv(\"data/data.csv\")."
  }
]